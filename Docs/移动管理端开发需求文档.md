# ç§»åŠ¨ç®¡ç†ç«¯å¼€å‘éœ€æ±‚æ–‡æ¡£

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0 | **åˆ›å»ºæ—¶é—´**: 2025-11-13 | **å¼€å‘å‘¨æœŸ**: 18å¤© | **æŠ€æœ¯æ ˆ**: uni-app 3.x + Vue 3 + TypeScript

---

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®èƒŒæ™¯
å¨å¨æˆ¿è½¦ç§»åŠ¨ç®¡ç†ç«¯æ˜¯é¢å‘é—¨åº—ä¸æ€»éƒ¨è¿è¥å›¢é˜Ÿçš„å¤–å‹¤ç®¡ç†å·¥å…·ï¼Œä½œä¸ºPCç®¡ç†ç«¯çš„åœºæ™¯åŒ–è¡¥å……ï¼Œç¡®ä¿è¿è¥äººå‘˜åœ¨å¤–å‡ºã€é©»åº—ã€ç°åœºç­‰éåŠå…¬ç¯å¢ƒä¸‹ä¹Ÿèƒ½é«˜æ•ˆå¤„ç†å…³é”®ä¸šåŠ¡ã€‚

### æŠ€æœ¯æ¶æ„é€‰æ‹©
æ ¹æ®é¡¹ç›®éœ€æ±‚å’ŒæŠ€æœ¯è°ƒç ”ï¼Œç¡®å®šä»¥ä¸‹æŠ€æœ¯æ–¹æ¡ˆï¼š

**å‰ç«¯æŠ€æœ¯æ ˆ**:
- **æ¡†æ¶**: uni-app 3.x + Vue 3 + TypeScript
- **UIç»„ä»¶åº“**: uni-ui + è‡ªå®šä¹‰ç»„ä»¶
- **çŠ¶æ€ç®¡ç†**: Pinia
- **æ•°æ®åŒæ­¥**: åŸºäºäº‹ä»¶é©±åŠ¨çš„å®æ—¶åŒæ­¥
- **ç¦»çº¿å­˜å‚¨**: SQLite + IndexedDB
- **æ ¸éªŒæ¨¡æ¿**: åŠ¨æ€å¯é…ç½®çš„æ£€æŸ¥æ¨¡æ¿ç³»ç»Ÿ

**æ ¸å¿ƒç‰¹æ€§**:
- ğŸŒ PWAæ”¯æŒï¼ŒåŸç”Ÿåº”ç”¨ä½“éªŒ
- ğŸ“± ç°åœºæ“ä½œä¼˜åŒ–ï¼Œæ”¯æŒå•æ‰‹æ“ä½œ
- ğŸ”„ ç¦»çº¿ä¼˜å…ˆï¼Œè‡ªåŠ¨åŒæ­¥æ•°æ®
- ğŸ“¸ å¤šåª’ä½“é‡‡é›†ï¼Œæ‹ç…§å½•éŸ³æ”¯æŒ
- âš¡ å®æ—¶é€šä¿¡ï¼Œäº‹ä»¶é©±åŠ¨æ¶æ„

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„è®¾è®¡

### 1. æ•´ä½“æ¶æ„

```mermaid
graph TB
    A[ç§»åŠ¨ç®¡ç†ç«¯] --> B[APIç½‘å…³]
    A --> C[æœ¬åœ°å­˜å‚¨]
    A --> D[äº‹ä»¶æ€»çº¿]

    B --> E[åç«¯æœåŠ¡]
    C --> F[SQLite]
    C --> G[IndexedDB]

    D --> H[å®æ—¶åŒæ­¥]
    D --> I[ç¦»çº¿é˜Ÿåˆ—]

    E --> J[MySQL]
    E --> K[Redis]
```

### 2. æŠ€æœ¯é€‰å‹è¯´æ˜

#### 2.1 UIç»„ä»¶åº“é€‰æ‹© - uni-ui + è‡ªå®šä¹‰ç»„ä»¶

**é€‰æ‹©ç†ç”±**:
- uni-uiä¸uni-appæ·±åº¦é›†æˆï¼Œå…¼å®¹æ€§æœ€ä½³
- é’ˆå¯¹ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼Œæ€§èƒ½ä¼˜å¼‚
- ç»„ä»¶ä¸°å¯Œï¼Œè¦†ç›–å¤§éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯
- æ”¯æŒè‡ªå®šä¹‰ä¸»é¢˜ï¼Œç¬¦åˆå“ç‰Œè§„èŒƒ

**è‡ªå®šä¹‰ç»„ä»¶è§„åˆ’**:
```typescript
// ä¸šåŠ¡ç»„ä»¶åº“
components/
â”œâ”€â”€ business/
â”‚   â”œâ”€â”€ FieldChecklist/      // ç°åœºæ£€æŸ¥ç»„ä»¶
â”‚   â”œâ”€â”€ PhotoUploader/       // å›¾ç‰‡ä¸Šä¼ ç»„ä»¶
â”‚   â”œâ”€â”€ SignaturePad/        // ç”µå­ç­¾åç»„ä»¶
â”‚   â”œâ”€â”€ TaskCard/           // ä»»åŠ¡å¡ç‰‡ç»„ä»¶
â”‚   â””â”€â”€ OrderStatusTracker/ // è®¢å•çŠ¶æ€è·Ÿè¸ªå™¨
â”œâ”€â”€ layout/
â”‚   â”œâ”€â”€ TabBar/            // åº•éƒ¨å¯¼èˆª
â”‚   â”œâ”€â”€ PageHeader/        // é¡µé¢å¤´éƒ¨
â”‚   â””â”€â”€ FloatingButton/    // æ‚¬æµ®æŒ‰é’®
â””â”€â”€ common/
    â”œâ”€â”€ DataSync/          // æ•°æ®åŒæ­¥æŒ‡ç¤ºå™¨
    â”œâ”€â”€ OfflineBanner/     // ç¦»çº¿æç¤º
    â””â”€â”€ PermissionCheck/   // æƒé™æ£€æŸ¥
```

#### 2.2 æ•°æ®åŒæ­¥ç­–ç•¥ - åŸºäºäº‹ä»¶é©±åŠ¨

**æ¶æ„è®¾è®¡**:
```typescript
// äº‹ä»¶é©±åŠ¨æ¶æ„
interface SyncEvent {
  id: string
  type: 'create' | 'update' | 'delete'
  resource: string
  data: any
  timestamp: number
  userId: string
}

class EventDrivenSync {
  private eventQueue: SyncEvent[] = []
  private subscribers: Map<string, Function[]> = new Map()

  // å‘å¸ƒäº‹ä»¶
  publish(event: SyncEvent): void

  // è®¢é˜…äº‹ä»¶
  subscribe(resource: string, handler: Function): void

  // å¤„ç†åŒæ­¥
  processSync(): Promise<void>
}
```

**åŒæ­¥ç­–ç•¥**:
- **å®æ—¶åŒæ­¥**: è®¢å•çŠ¶æ€ã€ç´§æ€¥æ¶ˆæ¯ï¼ˆWebSocketï¼‰
- **æ‰¹é‡åŒæ­¥**: æ•´æ•°æ®ã€æŠ¥è¡¨ï¼ˆå®šæ—¶åŒæ­¥ï¼‰
- **å†²çªè§£å†³**: æ—¶é—´æˆ³ + ä¸šåŠ¡è§„åˆ™ä¼˜å…ˆçº§
- **ç¦»çº¿æ”¯æŒ**: æœ¬åœ°äº‹ä»¶é˜Ÿåˆ—ï¼Œç½‘ç»œæ¢å¤ååŒæ­¥

#### 2.3 æ ¸éªŒæ¨¡æ¿ç®¡ç† - åŠ¨æ€å¯é…ç½®

**æ¨¡æ¿ç³»ç»Ÿè®¾è®¡**:
```typescript
interface CheckTemplate {
  id: string
  name: string
  version: string
  category: 'vehicle' | 'order' | 'safety'
  items: CheckItem[]
  config: TemplateConfig
}

interface CheckItem {
  id: string
  title: string
  type: 'photo' | 'text' | 'number' | 'select' | 'signature'
  required: boolean
  options?: string[]
  validation?: ValidationRule[]
}

class TemplateManager {
  // åŠ¨æ€åŠ è½½æ¨¡æ¿
  async loadTemplate(category: string): Promise<CheckTemplate>

  // éªŒè¯æ¨¡æ¿æ•°æ®
  validateData(template: CheckTemplate, data: any): ValidationResult

  // æ¸²æŸ“æ£€æŸ¥è¡¨å•
  renderForm(template: CheckTemplate): VNode
}
```

---

## ğŸ“± åŠŸèƒ½æ¨¡å—å¼€å‘è§„åˆ’

### Phase 1: åŸºç¡€æ¡†æ¶æ­å»º (Day 1-3)

#### Day 1: é¡¹ç›®åˆå§‹åŒ–
**ç›®æ ‡**: å®Œæˆå¼€å‘ç¯å¢ƒæ­å»ºå’ŒåŸºç¡€æ¶æ„

**ä»»åŠ¡æ¸…å•**:
- [ ] åˆ›å»ºuni-appé¡¹ç›®ï¼Œé…ç½®TypeScript
- [ ] é›†æˆuni-uiç»„ä»¶åº“
- [ ] é…ç½®PiniaçŠ¶æ€ç®¡ç†
- [ ] æ­å»ºé¡¹ç›®ç›®å½•ç»“æ„
- [ ] é…ç½®ESLint + Prettier
- [ ] è®¾ç½®Gitå·¥ä½œæµ

**é¢„æœŸäº¤ä»˜**:
```bash
mobile-admin/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ pages/              # é¡µé¢
â”‚   â”œâ”€â”€ components/         # ç»„ä»¶
â”‚   â”œâ”€â”€ stores/            # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ services/          # APIæœåŠ¡
â”‚   â””â”€â”€ types/             # ç±»å‹å®šä¹‰
```

#### Day 2: å¯¼èˆªä¸å¸ƒå±€
**ç›®æ ‡**: å®ç°åº•éƒ¨å¯¼èˆªå’Œé¡µé¢å¸ƒå±€

**æ ¸å¿ƒç»„ä»¶**:
```vue
<!-- TabBaråº•éƒ¨å¯¼èˆª -->
<template>
  <view class="tabbar">
    <view
      v-for="tab in tabs"
      :key="tab.id"
      :class="['tab-item', { active: currentTab === tab.id }]"
      @click="switchTab(tab.id)"
    >
      <uni-icons :type="tab.icon" :size="24" />
      <text class="tab-text">{{ tab.name }}</text>
    </view>
  </view>
</template>
```

**ä»»åŠ¡æ¸…å•**:
- [ ] å®ç°5Tabåº•éƒ¨å¯¼èˆªï¼ˆå·¥ä½œå°ã€è®¢å•ã€è½¦è¾†ã€æ¶ˆæ¯ã€æˆ‘çš„ï¼‰
- [ ] åˆ›å»ºé¡µé¢å¸ƒå±€ç»„ä»¶
- [ ] å®ç°é¡µé¢åˆ‡æ¢åŠ¨ç”»
- [ ] é€‚é…ä¸åŒå±å¹•å°ºå¯¸
- [ ] æ·»åŠ å¯¼èˆªæƒé™æ§åˆ¶

#### Day 3: çŠ¶æ€ç®¡ç†ä¸APIå±‚
**ç›®æ ‡**: å»ºç«‹æ•°æ®æµå’ŒAPIé€šä¿¡æœºåˆ¶

**çŠ¶æ€ç®¡ç†è®¾è®¡**:
```typescript
// stores/user.ts
export const useUserStore = defineStore('user', {
  state: () => ({
    userInfo: null as User | null,
    permissions: [] as string[],
    isOnline: navigator.onLine
  }),

  actions: {
    async login(credentials: LoginData) {
      // ç™»å½•é€»è¾‘
    },

    async syncUserData() {
      // åŒæ­¥ç”¨æˆ·æ•°æ®
    }
  }
})
```

**ä»»åŠ¡æ¸…å•**:
- [ ] é…ç½®Piniaæ¨¡å—åŒ–å­˜å‚¨
- [ ] å®ç°APIè¯·æ±‚å°è£…
- [ ] æ·»åŠ è¯·æ±‚/å“åº”æ‹¦æˆªå™¨
- [ ] å®ç°Tokenè‡ªåŠ¨åˆ·æ–°
- [ ] æ·»åŠ é”™è¯¯å¤„ç†æœºåˆ¶

### Phase 2: æ ¸å¿ƒä¸šåŠ¡æ¨¡å— (Day 4-12)

#### Day 4-5: å·¥ä½œå°æ¨¡å—
**ç›®æ ‡**: å®ç°æ•°æ®æ¦‚è§ˆå’Œä»»åŠ¡ç®¡ç†

**æ ¸å¿ƒåŠŸèƒ½**:
```vue
<!-- å·¥ä½œå°é¦–é¡µ -->
<template>
  <view class="dashboard">
    <!-- æ•°æ®æ¦‚è§ˆå¡ç‰‡ -->
    <view class="stats-grid">
      <view v-for="stat in stats" :key="stat.key" class="stat-card">
        <text class="stat-value">{{ stat.value }}</text>
        <text class="stat-label">{{ stat.label }}</text>
      </view>
    </view>

    <!-- å¾…åŠä»»åŠ¡ -->
    <view class="task-section">
      <view class="section-header">
        <text class="title">å¾…åŠä»»åŠ¡</text>
        <text class="badge">{{ pendingTasks.length }}</text>
      </view>
      <TaskCard v-for="task in pendingTasks" :key="task.id" :task="task" />
    </view>
  </view>
</template>
```

**ä»»åŠ¡æ¸…å•**:
- [ ] å®ç°æ•°æ®æ¦‚è§ˆç»„ä»¶ï¼ˆè®¢å•é‡ã€æ”¶å…¥ã€è½¦è¾†çŠ¶æ€ï¼‰
- [ ] åˆ›å»ºå¾…åŠä»»åŠ¡åˆ—è¡¨
- [ ] å®ç°ä»»åŠ¡çŠ¶æ€ç®¡ç†
- [ ] æ·»åŠ å¿«æ·æ“ä½œå…¥å£
- [ ] å®ç°ä»Šæ—¥æé†’åŠŸèƒ½
- [ ] æ·»åŠ ä¸‹æ‹‰åˆ·æ–°å’Œä¸Šæ‹‰åŠ è½½

#### Day 6-7: è®¢å•æ¨¡å—
**ç›®æ ‡**: å®ç°è®¢å•å…¨æµç¨‹ç®¡ç†

**è®¢å•çŠ¶æ€è·Ÿè¸ªå™¨**:
```vue
<template>
  <view class="order-tracker">
    <view
      v-for="(step, index) in steps"
      :key="step.id"
      :class="['step-item', {
        active: currentStep >= index,
        completed: currentStep > index
      }]"
    >
      <view class="step-icon">
        <uni-icons v-if="currentStep > index" type="checkmarkempty" />
        <text v-else>{{ index + 1 }}</text>
      </view>
      <text class="step-title">{{ step.title }}</text>
    </view>
  </view>
</template>
```

**ä»»åŠ¡æ¸…å•**:
- [ ] å®ç°è®¢å•åˆ—è¡¨é¡µé¢ï¼ˆæ”¯æŒç­›é€‰ã€æœç´¢ï¼‰
- [ ] åˆ›å»ºè®¢å•è¯¦æƒ…é¡µé¢
- [ ] å®ç°è®¢å•çŠ¶æ€æ›´æ–°
- [ ] æ·»åŠ ç°åœºæ ¸éªŒåŠŸèƒ½
- [ ] å®ç°å¼‚å¸¸å¤„ç†æµç¨‹
- [ ] æ·»åŠ å®¢æˆ·è”ç³»åŠŸèƒ½

#### Day 8-9: è½¦è¾†æ¨¡å—
**ç›®æ ‡**: å®ç°è½¦è¾†çŠ¶æ€å’Œç»´ä¿ç®¡ç†

**è½¦è¾†çŠ¶æ€å¡ç‰‡**:
```vue
<template>
  <view class="vehicle-card">
    <view class="vehicle-header">
      <image :src="vehicle.image" class="vehicle-image" />
      <view class="vehicle-info">
        <text class="vehicle-name">{{ vehicle.name }}</text>
        <text class="vehicle-plate">{{ vehicle.licensePlate }}</text>
        <view :class="['status-badge', vehicle.status]">
          {{ getStatusText(vehicle.status) }}
        </view>
      </view>
    </view>

    <view class="vehicle-actions">
      <button @click="checkVehicle" class="action-btn primary">
        è½¦è¾†æ£€æŸ¥
      </button>
      <button @click="scheduleMaintenance" class="action-btn">
        ç»´ä¿é¢„çº¦
      </button>
    </view>
  </view>
</template>
```

**ä»»åŠ¡æ¸…å•**:
- [ ] å®ç°è½¦è¾†åˆ—è¡¨å±•ç¤º
- [ ] åˆ›å»ºè½¦è¾†è¯¦æƒ…é¡µé¢
- [ ] å®ç°è½¦è¾†çŠ¶æ€ç®¡ç†
- [ ] æ·»åŠ ç»´ä¿è®°å½•åŠŸèƒ½
- [ ] å®ç°è°ƒåº¦åè°ƒåŠŸèƒ½
- [ ] æ·»åŠ æ¸…æ´ç®¡ç†æ¨¡å—

#### Day 10-11: æ¶ˆæ¯æ¨¡å—
**ç›®æ ‡**: å®ç°å®æ—¶æ²Ÿé€šå’Œé€šçŸ¥ç®¡ç†

**å®æ—¶é€šä¿¡ç»„ä»¶**:
```typescript
class MessageService {
  private socket: WebSocket | null = null

  connect() {
    this.socket = new WebSocket(`${API_BASE}/ws`)
    this.socket.onmessage = (event) => {
      const message = JSON.parse(event.data)
      this.handleMessage(message)
    }
  }

  sendMessage(type: string, content: any) {
    if (this.socket?.readyState === WebSocket.OPEN) {
      this.socket.send(JSON.stringify({ type, content }))
    }
  }

  private handleMessage(message: any) {
    // å¤„ç†å®æ—¶æ¶ˆæ¯
  }
}
```

**ä»»åŠ¡æ¸…å•**:
- [ ] å®ç°WebSocketå®æ—¶é€šä¿¡
- [ ] åˆ›å»ºæ¶ˆæ¯åˆ—è¡¨é¡µé¢
- [ ] å®ç°å·¥å•å¤„ç†åŠŸèƒ½
- [ ] æ·»åŠ ç³»ç»Ÿé€šçŸ¥ç®¡ç†
- [ ] å®ç°ç´§æ€¥æé†’åŠŸèƒ½
- [ ] æ·»åŠ æ¶ˆæ¯æ¨é€æ”¯æŒ

#### Day 12: ä¸ªäººä¸­å¿ƒæ¨¡å—
**ç›®æ ‡**: å®ç°ä¸ªäººä¿¡æ¯å’Œç³»ç»Ÿè®¾ç½®

**ä»»åŠ¡æ¸…å•**:
- [ ] å®ç°ä¸ªäººä¿¡æ¯ç®¡ç†
- [ ] åˆ›å»ºç³»ç»Ÿè®¾ç½®é¡µé¢
- [ ] æ·»åŠ æ•°æ®åŒæ­¥é…ç½®
- [ ] å®ç°å¸®åŠ©ä¸­å¿ƒ
- [ ] æ·»åŠ å…³äºé¡µé¢
- [ ] å®ç°é€€å‡ºç™»å½•åŠŸèƒ½

### Phase 3: é«˜çº§åŠŸèƒ½å®ç° (Day 13-16)

#### Day 13-14: ç°åœºæ ¸éªŒæ¨¡å—
**ç›®æ ‡**: å®ç°åŠ¨æ€æ£€æŸ¥æ¨¡æ¿å’Œå¤šåª’ä½“é‡‡é›†

**åŠ¨æ€è¡¨å•æ¸²æŸ“å™¨**:
```vue
<template>
  <view class="check-form">
    <view v-for="item in template.items" :key="item.id" class="form-item">
      <text class="item-title">{{ item.title }}</text>

      <!-- å›¾ç‰‡æ‹æ‘„ -->
      <PhotoUploader
        v-if="item.type === 'photo'"
        v-model="formData[item.id]"
        :required="item.required"
      />

      <!-- æ–‡æœ¬è¾“å…¥ -->
      <uni-easyinput
        v-else-if="item.type === 'text'"
        v-model="formData[item.id]"
        :placeholder="item.placeholder"
      />

      <!-- é€‰æ‹©å™¨ -->
      <uni-data-picker
        v-else-if="item.type === 'select'"
        v-model="formData[item.id]"
        :localdata="item.options"
      />

      <!-- ç”µå­ç­¾å -->
      <SignaturePad
        v-else-if="item.type === 'signature'"
        v-model="formData[item.id]"
      />
    </view>
  </view>
</template>
```

**ä»»åŠ¡æ¸…å•**:
- [ ] å®ç°åŠ¨æ€æ¨¡æ¿æ¸²æŸ“å™¨
- [ ] åˆ›å»ºå›¾ç‰‡æ‹æ‘„å’Œä¸Šä¼ ç»„ä»¶
- [ ] å®ç°ç”µå­ç­¾ååŠŸèƒ½
- [ ] æ·»åŠ è¡¨å•éªŒè¯æœºåˆ¶
- [ ] å®ç°ç¦»çº¿æ•°æ®å­˜å‚¨
- [ ] æ·»åŠ æ‰¹é‡å¯¼å‡ºåŠŸèƒ½

#### Day 15: ç¦»çº¿åŒæ­¥æ¨¡å—
**ç›®æ ‡**: å®ç°å®Œæ•´çš„ç¦»çº¿æ”¯æŒå’Œæ•°æ®åŒæ­¥

**ç¦»çº¿é˜Ÿåˆ—ç®¡ç†**:
```typescript
class OfflineQueue {
  private queue: OfflineOperation[] = []

  add(operation: OfflineOperation) {
    this.queue.push(operation)
    this.persistQueue()
  }

  async process() {
    if (!navigator.onLine) return

    for (const operation of this.queue) {
      try {
        await this.executeOperation(operation)
        this.removeOperation(operation.id)
      } catch (error) {
        console.error('åŒæ­¥å¤±è´¥:', error)
      }
    }
  }

  private async executeOperation(operation: OfflineOperation) {
    // æ‰§è¡Œç¦»çº¿æ“ä½œ
  }
}
```

**ä»»åŠ¡æ¸…å•**:
- [ ] å®ç°ç¦»çº¿æ•°æ®å­˜å‚¨
- [ ] åˆ›å»ºæ“ä½œé˜Ÿåˆ—ç®¡ç†
- [ ] å®ç°å†²çªè§£å†³æœºåˆ¶
- [ ] æ·»åŠ åŒæ­¥çŠ¶æ€æŒ‡ç¤ºå™¨
- [ ] å®ç°æ•°æ®ç‰ˆæœ¬æ§åˆ¶
- [ ] æ·»åŠ æ‰‹åŠ¨åŒæ­¥åŠŸèƒ½

#### Day 16: æ€§èƒ½ä¼˜åŒ–ä¸å®‰å…¨
**ç›®æ ‡**: ä¼˜åŒ–åº”ç”¨æ€§èƒ½å’ŒåŠ å¼ºå®‰å…¨é˜²æŠ¤

**æ€§èƒ½ä¼˜åŒ–ç­–ç•¥**:
```typescript
// å›¾ç‰‡æ‡’åŠ è½½å’Œå‹ç¼©
const ImageOptimizer = {
  lazyLoad(imageElements: NodeListOf<Element>) {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const img = entry.target as HTMLImageElement
          img.src = img.dataset.src!
          observer.unobserve(img)
        }
      })
    })

    imageElements.forEach(img => observer.observe(img))
  },

  compressImage(file: File): Promise<Blob> {
    return new Promise((resolve) => {
      const canvas = document.createElement('canvas')
      const ctx = canvas.getContext('2d')!
      const img = new Image()

      img.onload = () => {
        canvas.width = img.width * 0.8
        canvas.height = img.height * 0.8
        ctx.drawImage(img, 0, 0, canvas.width, canvas.height)
        canvas.toBlob(resolve!, 'image/jpeg', 0.8)
      }

      img.src = URL.createObjectURL(file)
    })
  }
}
```

**ä»»åŠ¡æ¸…å•**:
- [ ] å®ç°å›¾ç‰‡æ‡’åŠ è½½å’Œå‹ç¼©
- [ ] æ·»åŠ è¯·æ±‚ç¼“å­˜æœºåˆ¶
- [ ] ä¼˜åŒ–Bundleå¤§å°
- [ ] å®ç°æ•°æ®åŠ å¯†å­˜å‚¨
- [ ] æ·»åŠ ç”Ÿç‰©è¯†åˆ«è®¤è¯
- [ ] å®ç°æ“ä½œå®¡è®¡æ—¥å¿—

### Phase 4: æµ‹è¯•ä¸éƒ¨ç½² (Day 17-18)

#### Day 17: å…¨é¢æµ‹è¯•
**ç›®æ ‡**: ç¡®ä¿åº”ç”¨è´¨é‡å’Œç¨³å®šæ€§

**æµ‹è¯•æ¸…å•**:
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡è¾¾åˆ°80%
- [ ] é›†æˆæµ‹è¯•æ‰€æœ‰APIæ¥å£
- [ ] ç«¯åˆ°ç«¯æµ‹è¯•æ ¸å¿ƒä¸šåŠ¡æµç¨‹
- [ ] å…¼å®¹æ€§æµ‹è¯•ï¼ˆiOS/Androidï¼‰
- [ ] æ€§èƒ½æµ‹è¯•ï¼ˆå¯åŠ¨æ—¶é—´ã€å†…å­˜å ç”¨ï¼‰
- [ ] ç¦»çº¿åŠŸèƒ½æµ‹è¯•
- [ ] ç½‘ç»œå¼‚å¸¸åœºæ™¯æµ‹è¯•

#### Day 18: æ‰“åŒ…éƒ¨ç½²
**ç›®æ ‡**: å®Œæˆåº”ç”¨æ‰“åŒ…å’Œå‘å¸ƒ

**éƒ¨ç½²æ¸…å•**:
- [ ] é…ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡
- [ ] ç”ŸæˆAndroid/iOSå®‰è£…åŒ…
- [ ] é…ç½®åº”ç”¨å•†åº—ä¿¡æ¯
- [ ] åˆ›å»ºç”¨æˆ·ä½¿ç”¨æ‰‹å†Œ
- [ ] å‡†å¤‡è¿ç»´ç›‘æ§
- [ ] åˆ¶å®šå‘å¸ƒè®¡åˆ’

---

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### 1. äº‹ä»¶é©±åŠ¨æ•°æ®åŒæ­¥

**å®ç°æ¶æ„**:
```typescript
// äº‹ä»¶æ€»çº¿
class EventBus {
  private listeners: Map<string, Function[]> = new Map()

  on(event: string, handler: Function) {
    if (!this.listeners.has(event)) {
      this.listeners.set(event, [])
    }
    this.listeners.get(event)!.push(handler)
  }

  emit(event: string, data: any) {
    const handlers = this.listeners.get(event) || []
    handlers.forEach(handler => handler(data))
  }
}

// åŒæ­¥ç®¡ç†å™¨
class SyncManager {
  constructor(private eventBus: EventBus) {
    this.eventBus.on('data-change', this.handleDataChange.bind(this))
  }

  private async handleDataChange(event: DataChangeEvent) {
    // æœ¬åœ°æ›´æ–°
    await this.updateLocal(event.type, event.data)

    // å¦‚æœåœ¨çº¿ï¼Œç«‹å³åŒæ­¥åˆ°æœåŠ¡å™¨
    if (navigator.onLine) {
      await this.syncToServer(event)
    } else {
      // ç¦»çº¿æ—¶åŠ å…¥é˜Ÿåˆ—
      await this.queueOperation(event)
    }
  }
}
```

### 2. åŠ¨æ€æ¨¡æ¿ç³»ç»Ÿ

**æ¨¡æ¿é…ç½®ç¤ºä¾‹**:
```json
{
  "id": "vehicle-daily-check",
  "name": "è½¦è¾†æ—¥å¸¸æ£€æŸ¥è¡¨",
  "version": "1.0.0",
  "category": "vehicle",
  "items": [
    {
      "id": "exterior-photo",
      "title": "å¤–è§‚ç…§ç‰‡",
      "type": "photo",
      "required": true,
      "config": {
        "maxPhotos": 5,
        "compression": 0.8
      }
    },
    {
      "id": "mileage",
      "title": "å½“å‰é‡Œç¨‹æ•°",
      "type": "number",
      "required": true,
      "validation": [
        {
          "type": "min",
          "value": 0
        }
      ]
    },
    {
      "id": "fuel-level",
      "title": "æ²¹é‡",
      "type": "select",
      "required": true,
      "options": [
        { "label": "ç©º", "value": "empty" },
        { "label": "1/4", "value": "quarter" },
        { "label": "1/2", "value": "half" },
        { "label": "3/4", "value": "three-quarters" },
        { "label": "æ»¡", "value": "full" }
      ]
    }
  ]
}
```

### 3. ç»„ä»¶åº“è®¾è®¡è§„èŒƒ

**å‘½åè§„èŒƒ**:
```typescript
// ç»„ä»¶å‘½åï¼šPascalCase
// æ–‡ä»¶å‘½åï¼škebab-case
// Propså‘½åï¼šcamelCase

interface ComponentProps {
  // åŸºç¡€å±æ€§
  id?: string
  class?: string
  style?: string | CSSProperties

  // ä¸šåŠ¡å±æ€§
  data: any
  config?: ComponentConfig
  disabled?: boolean
  loading?: boolean
}

// äº‹ä»¶å‘½åï¼šon + Action
interface ComponentEvents {
  onClick?: (event: MouseEvent) => void
  onChange?: (value: any) => void
  onSubmit?: (data: any) => void
}
```

---

## ğŸ“Š è´¨é‡ä¿è¯

### 1. ä»£ç è´¨é‡æ ‡å‡†

**TypeScriptè§„èŒƒ**:
```typescript
// ä¸¥æ ¼æ¨¡å¼é…ç½®
{
  "compilerOptions": {
    "strict": true,
    "noImplicitAny": true,
    "noImplicitReturns": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true
  }
}

// ç±»å‹å®šä¹‰ç¤ºä¾‹
interface ApiResponse<T> {
  code: number
  message: string
  data: T
  timestamp: string
}

interface User {
  id: number
  username: string
  phone: string
  roles: Role[]
  permissions: Permission[]
}
```

**ESLintè§„åˆ™**:
```json
{
  "extends": [
    "@typescript-eslint/recommended",
    "plugin:vue/vue3-recommended"
  ],
  "rules": {
    "@typescript-eslint/no-unused-vars": "error",
    "vue/component-name-in-template-casing": ["error", "kebab-case"],
    "vue/no-unused-components": "error"
  }
}
```

### 2. æ€§èƒ½ç›‘æ§æŒ‡æ ‡

**å…³é”®æŒ‡æ ‡**:
- åº”ç”¨å¯åŠ¨æ—¶é—´ < 3ç§’
- é¡µé¢åˆ‡æ¢æ—¶é—´ < 1ç§’
- APIè¯·æ±‚å“åº”æ—¶é—´ < 2ç§’
- ç¦»çº¿æ“ä½œå“åº”æ—¶é—´ < 500ms
- å†…å­˜å ç”¨ < 100MB
- å®‰è£…åŒ…å¤§å° < 50MB

**ç›‘æ§å®ç°**:
```typescript
// æ€§èƒ½ç›‘æ§
class PerformanceMonitor {
  static measurePageLoad(pageName: string) {
    const startTime = performance.now()

    return () => {
      const endTime = performance.now()
      const duration = endTime - startTime

      // ä¸ŠæŠ¥æ€§èƒ½æ•°æ®
      this.reportMetric({
        type: 'page_load',
        page: pageName,
        duration
      })
    }
  }

  static reportMetric(metric: Metric) {
    // å‘é€ç›‘æ§æ•°æ®
    console.log('Performance Metric:', metric)
  }
}
```

---

## ğŸš€ éƒ¨ç½²ä¸å‘å¸ƒ

### 1. æ„å»ºé…ç½®

**ç”Ÿäº§ç¯å¢ƒé…ç½®**:
```typescript
// vite.config.ts
export default defineConfig({
  plugins: [uni()],
  build: {
    target: 'es2015',
    minify: 'terser',
    terserOptions: {
      compress: {
        drop_console: true,
        drop_debugger: true
      }
    }
  },
  define: {
    __APP_VERSION__: JSON.stringify(process.env.npm_package_version),
    __API_BASE__: JSON.stringify(process.env.VUE_APP_API_BASE)
  }
})
```

### 2. å‘å¸ƒæµç¨‹

**CI/CDæµæ°´çº¿**:
```yaml
# .github/workflows/deploy.yml
name: Deploy Mobile Admin

on:
  push:
    branches: [main]
    paths: ['mobile-admin/**']

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
      - name: Install dependencies
        run: npm ci
      - name: Run tests
        run: npm run test
      - name: Build
        run: npm run build

  deploy:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to stores
        run: |
          # éƒ¨ç½²åˆ°åº”ç”¨å•†åº—
          echo "Deploying to app stores..."
```

---

## ğŸ“ˆ é¡¹ç›®é‡Œç¨‹ç¢‘

| é‡Œç¨‹ç¢‘ | æ—¶é—´ | äº¤ä»˜ç‰© | éªŒæ”¶æ ‡å‡† |
|--------|------|--------|----------|
| **MVPç‰ˆæœ¬** | Day 12 | åŸºç¡€åŠŸèƒ½æ¨¡å— | æ ¸å¿ƒä¸šåŠ¡æµç¨‹å¯ç”¨ |
| **Betaç‰ˆæœ¬** | Day 16 | å®Œæ•´åŠŸèƒ½åº”ç”¨ | æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡ |
| **æ­£å¼ç‰ˆæœ¬** | Day 18 | ç”Ÿäº§å°±ç»ªåº”ç”¨ | æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡ï¼Œå¯å‘å¸ƒ |

---

## ğŸ”’ å®‰å…¨è€ƒè™‘

### 1. æ•°æ®å®‰å…¨
- æ•æ„Ÿæ•°æ®æœ¬åœ°åŠ å¯†å­˜å‚¨ï¼ˆAES-256ï¼‰
- é€šä¿¡æ•°æ®HTTPSåŠ å¯†ä¼ è¾“
- JWT Tokenè‡ªåŠ¨åˆ·æ–°æœºåˆ¶
- ç”Ÿç‰©è¯†åˆ«èº«ä»½è®¤è¯

### 2. ä¸šåŠ¡å®‰å…¨
- åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶ï¼ˆRBACï¼‰
- æ“ä½œå®¡è®¡æ—¥å¿—è®°å½•
- æ•æ„Ÿæ“ä½œäºŒæ¬¡ç¡®è®¤
- æ•°æ®åŒæ­¥ç­¾åéªŒè¯

---

## ğŸ“‹ éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶
- âœ… æ”¯æŒç°åœºä¸šåŠ¡æµç¨‹çš„ç§»åŠ¨åŒ–å¤„ç†
- âœ… å®ç°ä¸PCç«¯çš„æ•°æ®å®æ—¶åŒæ­¥
- âœ… æä¾›ç¦»çº¿æ“ä½œå’Œæ•°æ®ç¼“å­˜èƒ½åŠ›
- âœ… æ”¯æŒæ‹ç…§ã€å½•éŸ³ç­‰å¤šåª’ä½“ä¿¡æ¯é‡‡é›†
- âœ… ç³»ç»Ÿå“åº”æ—¶é—´ < 2ç§’ï¼Œæ”¯æŒ100ä¸ªå¤–å‹¤äººå‘˜åŒæ—¶åœ¨çº¿

### æ€§èƒ½éªŒæ”¶
- âœ… åº”ç”¨å¯åŠ¨æ—¶é—´ < 3ç§’
- âœ… é¡µé¢åˆ‡æ¢æµç•…ï¼Œæ— æ˜æ˜¾å¡é¡¿
- âœ… ç¦»çº¿æ“ä½œå“åº”è¿…é€Ÿ
- âœ… æ•°æ®åŒæ­¥ç¨³å®šå¯é 
- âœ… å†…å­˜å ç”¨åˆç†ï¼Œæ— å†…å­˜æ³„æ¼

### å…¼å®¹æ€§éªŒæ”¶
- âœ… iOS 12.0+ è®¾å¤‡å…¼å®¹
- âœ… Android 8.0+ è®¾å¤‡å…¼å®¹
- âœ… ä¸åŒå±å¹•å°ºå¯¸é€‚é…
- âœ… ç½‘ç»œç¯å¢ƒå…¼å®¹ï¼ˆåœ¨çº¿/ç¦»çº¿ï¼‰

---

**æ–‡æ¡£ç»´æŠ¤**: å¨å¨æˆ¿è½¦æŠ€æœ¯å›¢é˜Ÿ
**æœ€åæ›´æ–°**: 2025-11-13
**ç‰ˆæœ¬**: v1.0
**ä¸‹æ¬¡å®¡æ ¸**: 2025-12-13